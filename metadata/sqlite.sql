-- import to SQLite by running: sqlite3.exe db.sqlite3 -init sqlite.sql

PRAGMA journal_mode = MEMORY;
PRAGMA synchronous = OFF;
PRAGMA foreign_keys = OFF;
PRAGMA ignore_check_constraints = OFF;
PRAGMA auto_vacuum = NONE;
PRAGMA secure_delete = OFF;
BEGIN TRANSACTION;

DROP TABLE IF EXISTS `common_config`;

CREATE TABLE `common_config` (
`id` INTEGER  NOT NULL ,
`namespace` TEXT NOT NULL DEFAULT '' ,
`name` TEXT NOT NULL ,
`title` TEXT NOT NULL DEFAULT '' ,
`remark` TEXT NOT NULL DEFAULT '' ,
`rules` text ,
`value` text ,
`permissions` text ,
`is_need_form` tinyINTEGER  NOT NULL DEFAULT '1' ,
`ctime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
`mtime` datetime NOT NULL ,
PRIMARY KEY (`id`)
);
BEGIN;
INSERT INTO common_config VALUES(1,'','website','站点配置','',replace('{\n    "formItems":[\n        {\n            "field":"title",\n            "label":"站点名称",\n            "type":"input"\n        },\n        {\n            "field":"modules",\n            "label":"模块",\n            "type":"sub-form",\n            "props":{\n                "repeat":true,\n                "formItems":[\n                    {\n                        "field":"label",\n                        "label":"名称",\n                        "type":"input"\n                    },\n                    {\n                        "field":"id",\n                        "label":"ID",\n                        "type":"number"\n                    }\n                ]\n            }\n        }\n    ]\n}','\n',char(10)),'{"modules":[{"id":0,"label":"系统"},{"id":1,"label":"业务"}],"title":"OmsAdmin"}','',0,'2021-01-05 10:36:34','2021-08-03 13:55:20');
COMMIT;
DROP TABLE IF EXISTS `page`;

CREATE TABLE `page` (
`id` INTEGER  NOT NULL ,
`pid` INTEGER  NOT NULL DEFAULT '0' ,
`module_id` INTEGER NOT NULL DEFAULT '0' ,
`name` TEXT NOT NULL DEFAULT '' ,
`type` tinyINTEGER  NOT NULL DEFAULT '0' ,
`path` TEXT NOT NULL DEFAULT '' ,
`icon` TEXT NOT NULL DEFAULT '' ,
`page_type` tinyINTEGER  NOT NULL DEFAULT '0' ,
`page_schema` text ,
`view` TEXT NOT NULL DEFAULT '' ,
`sort` INTEGER  NOT NULL DEFAULT '0' ,
`status` tinyINTEGER NOT NULL DEFAULT '0' ,
`owner_ids` text ,
`ctime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,
`mtime` datetime NOT NULL  ,
PRIMARY KEY (`id`)
);
BEGIN;
INSERT INTO `page` VALUES (1,0,0,'系统管理',1,'#','ra-tradingvolume',0,'','',0,1,'','2020-12-15 19:00:19','2021-11-04 18:04:52');
INSERT INTO `page` VALUES (2,1,0,'用户管理',2,'/user','ra-office-supplies',7,'{\n    "exportCurrentPageAble": true,\n    "filter": [\n        {\n            "field": "nickname",\n            "label": "昵称",\n            "operator": "like",\n            "type": "input"\n        },\n        {\n            "field": "status",\n            "label": "状态",\n            "options": [\n                {\n                    "label": "启用",\n                    "value": 1\n                },\n                {\n                    "label": "禁用",\n                    "value": 0\n                }\n            ],\n            "type": "select"\n        },\n        {\n            "field": "ctime",\n            "label": "创建时间",\n            "operator": "between",\n            "type": "daterange"\n        }\n    ],\n    "formItems": [\n        {\n            "field": "name",\n            "label": "登录名",\n            "rule": "required",\n            "type": "input"\n        },\n        {\n            "field": "avatar",\n            "label": "头像",\n            "type": "image"\n        },\n        {\n            "field": "email",\n            "label": "邮箱",\n            "rules": "required_if:mobile|email",\n            "type": "input"\n        },\n        {\n            "field": "mobile",\n            "label": "手机号",\n            "rules": [\n                {\n                    "message": "请输入正确的手机号",\n                    "pattern": "^1[0-9]{10}$",\n                    "required": true,\n                    "type": "string"\n                }\n            ],\n            "type": "input"\n        },\n        {\n            "field": "status",\n            "label": "状态",\n            "options": [\n                {\n                    "label": "启用",\n                    "value": 1\n                },\n                {\n                    "label": "禁用",\n                    "value": 0\n                }\n            ],\n            "type": "radio"\n        },\n        {\n            "field": "role_ids",\n            "label": "用户角色",\n            "props": {\n                "optionsApi": "/role/tree",\n                "props": {\n                    "checkStrictly": true,\n                    "multiple": true\n                },\n                "style": {\n                    "width": "100%"\n                }\n            },\n            "type": "cascader"\n        }\n    ],\n    "getApi": "/user/get/{id}",\n    "headers": [\n        {\n            "field": "id",\n            "label": "ID"\n        },\n        {\n            "field": "name",\n            "label": "姓名",\n            "type": "span"\n        },\n        {\n            "field": "nickname",\n            "label": "昵称"\n        },\n        {\n            "field": "avatar",\n            "label": "头像",\n            "type": "image"\n        },\n        {\n            "field": "email",\n            "label": "邮箱",\n            "type": "input"\n        },\n        {\n            "field": "mobile",\n            "label": "手机",\n            "type": "input"\n        },\n        {\n            "field": "status",\n            "label": "状态",\n            "options": [\n                {\n                    "label": "启用",\n                    "value": 1\n                },\n                {\n                    "label": "禁用",\n                    "value": 0\n                }\n            ],\n            "state": {\n                "0": "warning",\n                "1": "success"\n            },\n            "type": "enum"\n        },\n        {\n            "field": "is_login",\n            "label": "登录状态",\n            "options": [\n                {\n                    "label": "已登录",\n                    "value": 1\n                },\n                {\n                    "label": "未登录",\n                    "value": 0\n                }\n            ],\n            "render": "is_login",\n            "state": {\n                "0": "warning",\n                "1": "success"\n            },\n            "type": "enum"\n        }\n    ],\n    "listApi": "/user/list",\n    "normalButton": [\n        {\n            "target": "/user/form",\n            "text": "新建",\n            "type": "jump"\n        }\n    ],\n    "rowButton": [\n        {\n            "props": {\n                "type": "primary"\n            },\n            "target": "/user/{id}",\n            "text": "编辑",\n            "type": "jump"\n        },\n        {\n            "subButton": [\n                {\n                    "api": {\n                        "method": "POST",\n                        "url": "/user/offline/{id}"\n                    },\n                    "target": "/user/offline/{id}",\n                    "text": "下线",\n                    "type": "api",\n                    "when": [\n                        "is_login",\n                        "=",\n                        1\n                    ]\n                },\n                {\n                    "extra": {\n                        "formItems": [\n                            {\n                                "field": "password",\n                                "label": "新密码",\n                                "type": "input"\n                            }\n                        ],\n                        "saveApi": "/user/newpwd/{id}"\n                    },\n                    "text": "改密",\n                    "type": "form"\n                }\n            ],\n            "text": "cc",\n            "type": "group"\n        }\n    ]\n}','',0,1,'','2020-12-16 09:08:05','2022-02-20 16:11:45');
INSERT INTO `page` VALUES (3,1,0,'角色管理',2,'/role','ra-Customermanagement',7,'{\n  "formItems": [\n    {\n      "field": "pid",\n      "label": "父角色",\n      "props": {\n        "optionsApi": "/role/tree",\n        "props": {\n          "checkStrictly": true\n        },\n        "saveAs": "number"\n      },\n      "type": "cascader"\n    },\n    {\n      "field": "name",\n      "label": "角色名",\n      "type": "input"\n    },\n    {\n      "field": "status",\n      "label": "状态",\n      "options": [\n        {\n          "label": "启用",\n          "value": 1\n        },\n        {\n          "label": "禁用",\n          "value": 0\n        }\n      ],\n      "type": "radio"\n    },\n    {\n      "field": "sort",\n      "label": "排序",\n      "type": "number"\n    },\n    {\n      "field": "resource",\n      "label": "角色资源",\n      "props": {\n        "optionsApi": "/role/resource",\n        "props": {\n          "checkStrictly": false,\n          "multiple": true\n        }\n      },\n      "type": "cascader-panel"\n    },\n    {\n      "field": "config",\n      "label": "配置",\n      "type": "sub-form",\n      "props": {\n        "formItems": [\n          {\n            "field": "role_type",\n            "label": "权限类型",\n            "type": "checkbox",\n            "options": [\n              {\n                "value": 1,\n                "label": "资源只读"\n              }\n            ]\n          }\n        ]\n      }\n    }\n  ],\n  "getApi": "/role/get/{id}",\n  "hasOne": [\n    "bilibili_tv.role:id->id,name as vname"\n  ],\n  "headers": [\n    {\n      "field": "name",\n      "label": "角色名",\n      "type": "input"\n    },\n    {\n      "field": "id",\n      "label": "ID",\n      "type": "input"\n    },\n    {\n      "field": "pid",\n      "label": "PID",\n      "type": "input"\n    },\n    {\n      "field": "vname",\n      "label": "父角色名",\n      "type": "input",\n      "fake": true\n    },\n    {\n      "field": "status",\n      "label": "状态",\n      "options": [\n        {\n          "label": "启用",\n          "value": 1\n        },\n        {\n          "label": "禁用",\n          "value": 0\n        }\n      ],\n      "state": {\n        "0": "warning",\n        "1": "success"\n      },\n      "type": "enum"\n    }\n  ],\n  "listApi": "/role/list",\n  "rowButton": [\n    {\n      "props": {\n        "icon": "el-icon-edit",\n        "type": "success"\n      },\n      "tips": "编辑",\n      "target": "/role/{id}",\n      "type": "jump",\n      "when": [\n        "id",\n        "!=",\n        1\n      ]\n    },\n    {\n      "props": {\n        "icon": "el-icon-plus",\n        "type": "info"\n      },\n      "target": "/role/form?pid={id}",\n      "type": "jump",\n      "tips": "添加子角色"\n    },\n    {\n      "extra": {\n        "method": "DELETE",\n        "url": "/role/del/{id}"\n      },\n      "props": {\n        "icon": "el-icon-delete",\n        "type": "danger"\n      },\n      "tips": "删除",\n      "type": "api",\n      "when": [\n        "id",\n        "!=",\n        1\n      ]\n    }\n  ],\n  "showPagination": false,\n  "tableProps": {\n    "defaultExpandAll": true\n  }\n}','',0,1,'','2020-12-16 11:22:50','2022-02-20 11:14:35');
INSERT INTO `page` VALUES (4,1,0,'菜单管理',2,'/menu','ra-nav-list',7,'{\n    "filter": [\n        {\n            "field": "name",\n            "label": "名称",\n            "type": "input"\n        },\n        {\n            "field": "status",\n            "label": "状态",\n            "options": [\n                {\n                    "label": "启用",\n                    "value": 1\n                },\n                {\n                    "label": "禁用",\n                    "value": 0\n                }\n            ],\n            "type": "select"\n        }\n    ],\n    "formItems": [\n        {\n            "col": {\n                "span": 8\n            },\n            "field": "name",\n            "label": "名称",\n            "type": "input",\n            "rules": "required"\n        },\n        {\n            "col": {\n                "span": 8\n            },\n            "field": "module_id",\n            "label": "模块",\n            "options": [\n                {\n                    "label": "系统",\n                    "value": 0\n                },\n                {\n                    "label": "业务",\n                    "value": 1\n                }\n            ],\n            "rules": "required",\n            "type": "select"\n        },\n        {\n            "col": {\n                "span": 8\n            },\n            "field": "pid",\n            "label": "上级菜单",\n            "props": {\n                "optionsApi": "/menu/tree",\n                "props": {\n                    "checkStrictly": true\n                },\n                "saveAs": "number"\n            },\n            "type": "cascader",\n            "valueType": "number"\n        },\n        {\n            "col": {\n                "span": 8\n            },\n            "field": "path",\n            "label": "前端路由",\n            "type": "input",\n            "rules": "required",\n            "validate": "required"\n        },\n        {\n            "col": {\n                "span": 8\n            },\n            "computed": {\n                "set": {\n                    "path": {\n                        "props": {\n                            "disabled": true\n                        },\n                        "value": "#"\n                    }\n                },\n                "when": [\n                    "in",\n                    [\n                        1\n                    ]\n                ]\n            },\n            "field": "type",\n            "label": "类型",\n            "options": [\n                {\n                    "label": "目录",\n                    "value": 1\n                },\n                {\n                    "label": "菜单",\n                    "value": 2\n                },\n                {\n                    "label": "页面",\n                    "value": 3\n                }\n            ],\n            "rules": "required",\n            "type": "select"\n        },\n        {\n            "col": {\n                "span": 8\n            },\n            "depend": {\n                "field": "type",\n                "value": [\n                    2,\n                    3\n                ]\n            },\n            "field": "page_type",\n            "label": "页面类型",\n            "options": [\n                {\n                    "label": "通用CRUD",\n                    "value": 7\n                },\n                {\n                    "label": "空",\n                    "value": 0\n                },\n                {\n                    "label": "列表",\n                    "value": 1\n                },\n                {\n                    "label": "表单",\n                    "value": 2\n                },\n                {\n                    "label": "前端自定义组件",\n                    "value": 4\n                },\n                {\n                    "label": "自定义Schema",\n                    "value": 3\n                },\n                {\n                    "label": "树装数据",\n                    "value": 5\n                },\n                {\n                    "label": "报表",\n                    "value": 6\n                }\n            ],\n            "type": "select"\n        },\n        {\n            "col": {\n                "span": 8\n            },\n            "field": "sort",\n            "label": "排序",\n            "type": "number"\n        },\n        {\n            "col": {\n                "span": 8\n            },\n            "field": "icon",\n            "label": "图标",\n            "type": "icon-select"\n        },\n        {\n            "col": {\n                "span": 8\n            },\n            "field": "status",\n            "label": "状态",\n            "options": [\n                {\n                    "label": "启用",\n                    "value": 1\n                },\n                {\n                    "label": "禁用",\n                    "value": 0\n                }\n            ],\n            "type": "radio"\n        },\n        {\n            "field": "owner_ids",\n            "label": "负责人",\n            "type": "select",\n            "rules": "required",\n            "props": {\n                "fullWidth": true,\n                "selectApi": "/user/select_options",\n                "multiple": true,\n                "immediate": true,\n                "multipleLimit": 10,\n                "valueKey": "id",\n                "labelKey": "nickname"\n            }\n        },\n        {\n            "depend": {\n                "field": "page_type",\n                "value": [\n                    1,\n                    2,\n                    3,\n                    5,\n                    7\n                ]\n            },\n            "field": "page_schema",\n            "label": "页面定义",\n            "type": "json"\n        },\n        {\n            "depend": {\n                "field": "page_type",\n                "value": 4\n            },\n            "field": "view",\n            "label": "组件路径",\n            "type": "input"\n        }\n    ],\n    "getApi": "/menu/get/{id}",\n    "headers": [\n        {\n            "field": "name",\n            "label": "名称",\n            "type": "input"\n        },\n        {\n            "field": "module_id",\n            "label": "名称",\n            "type": "hidden"\n        },\n        {\n            "field": "path",\n            "label": "前端路由",\n            "type": "input"\n        },\n        {\n            "field": "icon",\n            "label": "图标",\n            "type": "icon"\n        },\n        {\n            "field": "type",\n            "label": "类型",\n            "options": [\n                {\n                    "label": "目录",\n                    "value": 1\n                },\n                {\n                    "label": "菜单",\n                    "value": 2\n                },\n                {\n                    "label": "页面",\n                    "value": 3\n                }\n            ],\n            "state": {\n                "0": "warning",\n                "1": "success",\n                "2": "info"\n            },\n            "type": "enum"\n        },\n        {\n            "field": "status",\n            "label": "状态",\n            "options": [\n                {\n                    "label": "启用",\n                    "value": 1\n                },\n                {\n                    "label": "禁用",\n                    "value": 0\n                }\n            ],\n            "state": {\n                "0": "warning",\n                "1": "success"\n            },\n            "type": "enum"\n        },\n        {\n            "field": "id",\n            "hidden": true,\n            "label": "ID",\n            "type": "input"\n        },\n        {\n            "field": "pid",\n            "hidden": true,\n            "label": "PID",\n            "type": "input"\n        }\n    ],\n    "listApi": "/menu/list",\n    "normalButton": [\n        {\n            "target": "/menu/form",\n            "text": "新建",\n            "type": "jump",\n            "props": {\n                "type": "success"\n            }\n        },\n        {\n            "extra": {\n                "formItems": [\n                    {\n                        "field": "data",\n                        "label": "子菜单",\n                        "type": "json"\n                    }\n                ],\n                "saveApi": "/menu/import?id=0"\n            },\n            "text": "导入",\n            "type": "form"\n        }\n    ],\n    "rowButton": [\n        {\n            "props": {\n                "icon": "el-icon-edit",\n                "type": "success"\n            },\n            "target": "/menu/{id}",\n            "tips": "编辑",\n            "type": "jump"\n        },\n        {\n            "props": {\n                "icon": "el-icon-plus",\n                "type": "info"\n            },\n            "target": "/menu/form?pid={id}&module_id={module_id}",\n            "type": "jump"\n        },\n        {\n            "extra": {\n                "method": "DELETE",\n                "url": "/menu/del?id={id}"\n            },\n            "props": {\n                "icon": "el-icon-delete",\n                "type": "danger"\n            },\n            "tips": "删除",\n            "type": "api",\n            "when": [\n                "module_id",\n                ">",\n                0\n            ]\n        },\n        {\n            "subButton": [\n                {\n                    "extra": {\n                        "formItems": [\n                            {\n                                "field": "data",\n                                "label": "子菜单",\n                                "type": "json"\n                            }\n                        ],\n                        "saveApi": "/menu/import?id={id}"\n                    },\n                    "text": "导入",\n                    "type": "form"\n                },\n                {\n                    "extra": {\n                        "formItems": [\n                            {\n                                "field": "data",\n                                "label": "子菜单",\n                                "type": "json"\n                            }\n                        ],\n                        "getApi": "/menu/export?id={id}"\n                    },\n                    "text": "导出",\n                    "type": "form"\n                }\n            ],\n            "text": "cc",\n            "type": "group"\n        }\n    ],\n    "tabs": [\n        {\n            "field": "module_id",\n            "label": "系统",\n            "value": 0\n        },\n        {\n            "field": "module_id",\n            "label": "业务",\n            "value": 1\n        }\n    ]\n}','',0,1,'','2020-12-16 11:35:24','2022-10-17 10:04:01');
INSERT INTO `page` VALUES (5,0,0,'系统工具',1,'#','',0,'','',0,1,'','2020-12-21 19:09:31','2022-02-20 11:14:43');
INSERT INTO `page` VALUES (6,5,0,'通用表单',2,'/cconf','el-icon-star-off',7,'{\n  "exportAble": true, // 导出\n  "filter": [\n    {\n      "field": "title",\n      "label": "配置名称",\n      "type": "input"\n    },\n    {\n      "field": "name",\n      "label": "唯一码",\n      "type": "input"\n    }\n  ],\n  "formItems": [\n    {\n      "field": "title",\n      "label": "表单名",\n      "type": "input"\n    },\n    {\n      "field": "name",\n      "label": "唯一码",\n      "readonly": true,\n      "type": "input"\n    },\n    {\n      "field": "rules",\n      "label": "表单规则",\n      "type": "json"\n    },\n    {\n      "field": "remark",\n      "label": "备注",\n      "type": "input"\n    }\n  ],\n  "getApi": "/cconf/get/{id}",\n  "headers": [\n    {\n      "field": "id",\n      "label": "ID",\n      "props": {\n        "sortable": true\n      }\n    },\n    {\n      "field": "title",\n      "label": "配置名称",\n      "type": "input"\n    },\n    {\n      "field": "name",\n      "label": "唯一码",\n      "type": "input"\n    },\n    {\n      "field": "remark",\n      "label": "备注",\n      "type": "input"\n    }\n  ],\n  "listApi": "/cconf/list",\n  "normalButton": [\n    {\n      "target": "/cconf/form",\n      "text": "新建",\n      "type": "jump"\n    }\n  ],\n  "notice": {\n    "title": "这是一条页面提示type",\n    "type": "success"\n  },\n  "rowButton": [\n    {\n      "props": {\n        "type": "success"\n      },\n      "target": "/cconf/{id}",\n      "text": "编辑",\n      "type": "jump"\n    },\n    {\n      "props": {\n        "type": "info"\n      },\n      "target": "/cconf/collector/{id}",\n      "text": "表单",\n      "type": "jump"\n    }\n  ],\n  "saveApi": "/cconf/update/{id}"\n}','',0,1,'1','2020-12-21 20:10:02','2022-12-13 15:15:42');
INSERT INTO `page` VALUES (7,6,0,'表单填写',3,'/cconf/collector/:id','',2,'{\n  "infoApi": "/cconf/form_schema/{id}",\n  "getApi": "/cconf/form_value/{id}",\n  "saveApi": "/cconf/form_save/{id}"\n}','',0,1,'','2020-12-22 11:15:57','2022-02-20 11:15:03');
INSERT INTO `page` VALUES (8,1,0,'站点配置',2,'/website','',2,'{\n  "infoApi": "/cconf/form_schema/1",\n  "getApi": "/cconf/form_value/1",\n  "saveApi": "/cconf/form_save/1"\n}','',0,1,'','2023-07-26 11:34:24','2023-07-26 14:03:56');
COMMIT;
DROP TABLE IF EXISTS `role`;

CREATE TABLE `role` (
`id` INTEGER  NOT NULL ,
`pid` INTEGER  NOT NULL DEFAULT '0' ,
`name` TEXT NOT NULL DEFAULT '' ,
`sort` INTEGER  NOT NULL DEFAULT '0' ,
`status` tinyINTEGER  NOT NULL DEFAULT '0' ,
`resource` text ,
`config` TEXT DEFAULT NULL,
`ctime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,
`mtime` datetime NOT NULL  ,
PRIMARY KEY (`id`)
);
BEGIN;
INSERT INTO `role` VALUES (1, 0, '超管', 0, 1, '[]', '', '2021-07-26 15:39:00', '2021-08-03 14:59:42');
COMMIT;
DROP TABLE IF EXISTS `user`;

CREATE TABLE `user` (
`id` INTEGER  NOT NULL ,
`name` TEXT NOT NULL ,
`nickname` TEXT NOT NULL DEFAULT '' ,
`avatar` TEXT DEFAULT NULL ,
`password` TEXT NOT NULL DEFAULT '' ,
`status` tinyINTEGER  NOT NULL DEFAULT '0' ,
`email` TEXT DEFAULT NULL ,
`mobile` TEXT DEFAULT NULL ,
`role_ids` text ,
`ctime` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,
`mtime` datetime NOT NULL  ,
PRIMARY KEY (`id`)
);
BEGIN;
INSERT INTO `user` VALUES (1, 'test', 'test', NULL, '$2a$10$x92t6Z6OCneWtL2PMBEcgufllRvCU3Jukn8QVTRf.sVo9HGXvBEpy', 1, NULL, NULL, '[[1]]', '2022-02-19 14:21:10', '2022-02-20 11:12:47');
COMMIT;

CREATE UNIQUE INDEX `common_config_unique` ON `common_config` (`name`);
CREATE INDEX `common_config_namespace` ON `common_config` (`namespace`);
CREATE INDEX `common_config_update_at` ON `common_config` (`mtime`);
CREATE UNIQUE INDEX `user_unique_name` ON `user` (`name`);

COMMIT;
PRAGMA ignore_check_constraints = ON;
PRAGMA foreign_keys = ON;
PRAGMA journal_mode = WAL;
PRAGMA synchronous = NORMAL;
